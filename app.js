!function t(a,n,e){function r(u,l){if(!n[u]){if(!a[u]){var i="function"==typeof require&&require;if(!l&&i)return i(u,!0);if(o)return o(u,!0);var m=new Error("Cannot find module '"+u+"'");throw m.code="MODULE_NOT_FOUND",m}var s=n[u]={exports:{}};a[u][0].call(s.exports,function(t){var n=a[u][1][t];return r(n||t)},s,s.exports,t,a,n,e)}return n[u].exports}for(var o="function"==typeof require&&require,u=0;u<e.length;u++)r(e[u]);return r}({1:[function(t,a,n){"use strict";function e(t,a){var n={};for(var e in t)a.indexOf(e)>=0||Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e]);return n}function r(t){var a=t.toString().split("."),n=o(a,2),e=n[0],r=n[1];return parseInt(r.padEnd(8,"0"))+1e8*parseInt(e)}var o=function(){function t(t,a){var n=[],e=!0,r=!1,o=void 0;try{for(var u,l=t[Symbol.iterator]();!(e=(u=l.next()).done)&&(n.push(u.value),!a||n.length!==a);e=!0);}catch(t){r=!0,o=t}finally{try{!e&&l.return&&l.return()}finally{if(r)throw o}}return n}return function(a,n){if(Array.isArray(a))return a;if(Symbol.iterator in Object(a))return t(a,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=t("preact-cycle"),l=function(t,a){t.started=!0,i(t,a)},i=function(t,a){var n=new WebSocket("wss://tradeogre.com:8080/");fetch("https://tradeogre.com/api/v1/markets").then(function(t){return t.json()}).then(function(t){console.log(t);var e=t.map(function(t){return Object.keys(t)[0].split("-")[1]}),o=0;n.addEventListener("open",function(){(new Date).getTime();e.forEach(function(t){return n.send(JSON.stringify({a:"submarket",name:"BTC-"+t}))})}),n.addEventListener("message",function(t){var n=t.data,u=JSON.parse(n);"orders"===u.a&&("buy"===u.t?a(m)("tradeogre","buy",e[o],Object.keys(u.d).map(function(t){return[r(t),parseFloat(u.d[t])]})):"sell"===u.t&&a(m)("tradeogre","sell",e[o++],Object.keys(u.d).map(function(t){return[r(t),parseFloat(u.d[t])]})))})}).catch(function(t){return console.log("error fetching tradeogre markets!",t)})},m=function(t,a,n,e,r){var u=t.market[a][e]=t.market[a][e]||{};return u[n]=r,u.statistics={amount:{max:-1/0,min:1/0}},u.sellStatistics={amount:{max:-1/0,min:1/0}},u.buyStatistics={amount:{max:-1/0,min:1/0}},u.totalBuyMarket=(u.buy||[]).reduce(function(t,a){var n=o(a,2),e=n[0],r=n[1];return u.statistics.amount.max=Math.max(u.statistics.amount.max,r),u.statistics.amount.min=Math.min(u.statistics.amount.min,r),u.buyStatistics.amount.max=Math.max(u.buyStatistics.amount.max,r),u.buyStatistics.amount.min=Math.min(u.buyStatistics.amount.min,r),t.totalBTCAmount+=r*e,t.totalAmount+=r,t},{totalBTCAmount:0,totalAmount:0}),u.totalSellMarket=(u.sell||[]).reduce(function(t,a){var n=o(a,2),e=n[0],r=n[1];return u.statistics.amount.max=Math.max(u.statistics.amount.max,r),u.statistics.amount.min=Math.min(u.statistics.amount.min,r),u.sellStatistics.amount.max=Math.max(u.sellStatistics.amount.max,r),u.sellStatistics.amount.min=Math.min(u.sellStatistics.amount.min,r),t.totalBTCAmount+=r*e,t.totalAmount+=r,t},{totalBTCAmount:0,totalAmount:0}),u.totalMarket=u.totalBuyMarket.totalAmount+u.totalSellMarket.totalAmount,t},s=function(t){var a=t.exchange;return(0,u.h)("summary",null,(0,u.h)(c,{headers:["Coin","Buy Market (btc)"],data:Object.keys(a).sort(function(t,n){return a[t].totalBuyMarket.totalBTCAmount>a[n].totalBuyMarket.totalBTCAmount?-1:1}).map(function(t){return[t,(a[t].totalBuyMarket.totalBTCAmount/1e8).toFixed(8)]})}))},c=function(t){var a=t.data,n=t.headers;return(0,u.h)("table",null,n?(0,u.h)("thead",null,n.map(function(t){return(0,u.h)("th",null,t)})):void 0,(0,u.h)("tbody",null,a.map(function(t){return(0,u.h)("tr",null,t.map(function(t){return(0,u.h)("td",null,t)}))})))},h=function(t){var a=t.exchange;return(0,u.h)("charts",null,console.log({exchange:a}),Object.keys(a).sort(function(t,n){return a[t].totalBuyMarket.totalBTCAmount>a[n].totalBuyMarket.totalBTCAmount?-1:1}).map(function(t){return(0,u.h)(f,{coin:t,data:a[t]})}))},f=function(t){var a=t.coin,n=t.data;return(0,u.h)("market",null,(0,u.h)("div",null,a,"| Total Market: ~",n.totalMarket.toFixed(0)," ||",(0,u.h)("buy",null,"~",n.totalBuyMarket.totalAmount.toFixed(2))," to buy (",(n.totalBuyMarket.totalAmount/(n.totalBuyMarket.totalAmount+n.totalSellMarket.totalAmount)).toFixed(2),") ",(0,u.h)("sell",null,"~",n.totalSellMarket.totalAmount.toFixed(2))," for sale  (",(n.totalSellMarket.totalAmount/(n.totalBuyMarket.totalAmount+n.totalSellMarket.totalAmount)).toFixed(2),")  [",(n.totalBuyMarket.totalAmount/n.totalSellMarket.totalAmount).toFixed(2),"]"),(0,u.h)("data",null,(0,u.h)("buy",{style:{width:n.totalBuyMarket.totalAmount/(n.totalBuyMarket.totalAmount+n.totalSellMarket.totalAmount)*100+"%"}},(n.buy||[]).map(function(t){var a=o(t,2),e=a[0],r=a[1];return(0,u.h)(d,{price:e,amount:r,height:r/n.statistics.amount.max})})),(0,u.h)("sell",{style:{width:n.totalSellMarket.totalAmount/(n.totalBuyMarket.totalAmount+n.totalSellMarket.totalAmount)*100+"%"}},(n.sell||[]).map(function(t){var a=o(t,2),e=a[0],r=a[1];return(0,u.h)(d,{price:e,amount:r,height:r/n.statistics.amount.max})}))))},d=function(t){t.price;var a=t.amount,n=t.height;return(0,u.h)("price-bar",{style:{height:100*n+"%"},title:a})};(0,u.render)(function(t){return function(a,n){var r=n.mutation,o=a.started,i=e(a,["started"]);return(0,u.h)("view",null,o?(0,u.h)(t,i):r(l)(r))}}(function(t){var a=t.market;return(0,u.h)("markets",null,(0,u.h)(s,{exchange:a.tradeogre}),(0,u.h)(h,{exchange:a.tradeogre}))}),{market:{tradeogre:{}}},document.body)},{"preact-cycle":"preact-cycle"}]},{},[1]);